<header class="site-header">
  <div class="site-header__container">
    <!-- Logo/Site title -->
    <a href="{{ '/' | relative_url }}" class="site-header__logo">
      {{ site.title }}
    </a>

    <!-- Mobile menu toggle -->
    <button class="menu-toggle" id="menu-toggle" aria-label="Toggle menu" aria-expanded="false">
      <span class="menu-toggle__icon"></span>
    </button>

    <!-- Navigation -->
    <nav class="site-header__nav d-none d-md-flex">
      <!-- Main navigation -->
      <div class="main-nav">
        <a href="{{ '/' | relative_url }}" class="main-nav__item {% if page.url == '/' %}main-nav__item--active{% endif %}">
          Home
        </a>
        <a href="{{ '/texts/' | relative_url }}" class="main-nav__item {% if page.url contains '/texts/' %}main-nav__item--active{% endif %}">
          Texts
        </a>
        <a href="{{ '/about/' | relative_url }}" class="main-nav__item {% if page.url == '/about/' %}main-nav__item--active{% endif %}">
          About
        </a>
      </div>

      <!-- Controls -->
      <div class="header-controls">
        <!-- Font size controls -->
        {% if site.theme_settings.features.font_controls != false %}
          <div class="font-controls">
            <button class="font-controls__btn" id="font-decrease" aria-label="Decrease font size" title="Decrease font size">
              A‚àí
            </button>
            <button class="font-controls__btn font-controls__reset" id="font-reset" aria-label="Reset font size" title="Reset font size">
              A
            </button>
            <button class="font-controls__btn" id="font-increase" aria-label="Increase font size" title="Increase font size">
              A+
            </button>
          </div>
        {% endif %}

        <!-- Search -->
        {% if site.theme_settings.features.search %}
          <div class="search">
            <input
              type="search"
              class="search__input"
              id="search-input"
              placeholder="Search..."
              aria-label="Search"
            />
            <span class="search__icon">üîç</span>
            <div class="search__results" id="search-results"></div>
          </div>
        {% endif %}

        <!-- Theme toggle -->
        {% if site.theme_settings.features.night_mode %}
          <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode" title="Toggle dark/light mode">
            <span class="theme-toggle__slider"></span>
          </button>
        {% endif %}
      </div>
    </nav>
  </div>

  <!-- Mobile navigation -->
  <nav class="main-nav" id="mobile-nav">
    <a href="{{ '/' | relative_url }}" class="main-nav__item {% if page.url == '/' %}main-nav__item--active{% endif %}">
      Home
    </a>
    <a href="{{ '/texts/' | relative_url }}" class="main-nav__item {% if page.url contains '/texts/' %}main-nav__item--active{% endif %}">
      Texts
    </a>
    <a href="{{ '/about/' | relative_url }}" class="main-nav__item {% if page.url == '/about/' %}main-nav__item--active{% endif %}">
      About
    </a>
    <a href="{{ '/help/' | relative_url }}" class="main-nav__item {% if page.url == '/help/' %}main-nav__item--active{% endif %}">
      Help
    </a>

    <!-- Mobile controls -->
    <div class="mobile-controls">
      <h4>Controls</h4>

      <!-- Font size -->
      <div class="mobile-control-row">
        <span class="mobile-control-label">Font Size:</span>
        <div class="font-controls">
          <button class="font-controls__btn" data-action="decrease" aria-label="Decrease font size">A‚àí</button>
          <button class="font-controls__btn font-controls__reset" data-action="reset" aria-label="Reset font size">A</button>
          <button class="font-controls__btn" data-action="increase" aria-label="Increase font size">A+</button>
        </div>
      </div>

      <!-- Theme toggle -->
      {% if site.theme_settings.features.night_mode %}
      <div class="mobile-control-row">
        <span class="mobile-control-label">Theme:</span>
        <button class="theme-toggle" data-theme-toggle aria-label="Toggle dark mode">
          <span class="theme-toggle__slider"></span>
        </button>
      </div>
      {% endif %}

      <!-- Search (mobile) -->
      {% if site.theme_settings.features.search %}
      <div class="mobile-search">
        <label for="search-input-mobile" class="mobile-control-label">Search:</label>
        <input
          type="search"
          class="search__input"
          id="search-input-mobile"
          placeholder="Search site..."
          aria-label="Search"
        />
        <div class="search__results" id="search-results-mobile"></div>
      </div>
      {% endif %}
    </div>
  </nav>
</header>

<style>
  .header-controls {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
  }

  @media (max-width: 767px) {
    .header-controls {
      display: none;
    }
  }

  .mobile-controls {
    display: block;
    padding: var(--spacing-lg) 0;
    border-top: 1px solid var(--color-border);
    margin-top: var(--spacing-md);
  }

  @media (min-width: 768px) {
    .mobile-controls {
      display: none;
    }
  }

  .mobile-controls h4 {
    margin: 0 0 var(--spacing-md) 0;
    font-size: var(--font-size-base);
    color: var(--color-accent);
  }

  .mobile-control-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-sm) 0;
  }

  .mobile-control-label {
    font-size: var(--font-size-small);
    font-weight: 500;
  }

  .mobile-search {
    margin-top: var(--spacing-md);
  }

  .mobile-search label {
    display: block;
    margin-bottom: var(--spacing-sm);
    font-size: var(--font-size-small);
    font-weight: 500;
  }

  .mobile-search input {
    width: 100%;
  }

  .mobile-search .search__results {
    position: relative;
    top: 0;
    margin-top: var(--spacing-sm);
  }
</style>
